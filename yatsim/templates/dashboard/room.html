{% extends "../base.html" %}

{% block header_text %}Dashboard{% endblock %}

{% block content %}

Hello {{ user.username }}, <a href={% url "logout" %}>logout</a> <a href={% url "dashboard" %}>dashboard</a>

<br>
{{room.id}}: <b>{{room.owner.username}}</b>/{{ room.room_name }}
<br>
{{room.height}}, {{room.width}}

<br>
<br>
<br>

Guests:
<ol>
    {% for u in room.guests.all %}
        <li>{{u.username}}</li>
    {% empty %}
        No guests :(
    {% endfor %}
</ol>

<form action="/room/clone/{{room.id}}/" method="post">
    {% csrf_token %}
    <label for="room_name">Room name:</label><br>
    <input type="text" id="room_name" name="room_name">

    <button type="submit" >Clone</button>
</form>

{% if is_owner %}
<form action="/room/delete/{{room.id}}/" method="post">
    {% csrf_token %}
    <button type="submit" >Delete Room</button>
</form>

<form action="/room/add/{{room.id}}/" method="post">
    {% csrf_token %}
    <label for="user_id">Choose user:</label><br>
    <input type="text" name="user_id" list="add_username">
    <datalist id="add_username">
        {% for u in users %}
            <option value="{{u.id}}">{{u.username}}</option>
        {% endfor %}
    </datalist>

    <button type="submit" >Add</button>
</form>

<form action="/room/remove/{{room.id}}/" method="post">
    {% csrf_token %}
    <label for="user_id">Choose user:</label><br>
    <input type="text" name="user_id" list="rem_username">
    <datalist id="rem_username">
        {% for u in room.guests.all %}
            <option value="{{u.id}}">{{u.username}}</option>
        {% endfor %}
    </datalist>

    <button type="submit" >Remove</button>
</form>
{% else %}
<form action="/room/leave/{{room.id}}/" method="post">
    {% csrf_token %}
    <button type="submit" >Leave</button>
</form>
{% endif %}
{% endblock %}
